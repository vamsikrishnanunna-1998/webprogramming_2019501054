<!DOCTYPE html>
<html>
    <head>
        <title>Registration page</title>
        <link rel="stylesheet" href="{{url_for('static',filename='register1.css')}}">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    </head>
    <script type="text/javascript">
        function checkPassword(str)
        {
        var validpwd = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}$/;
        return validpwd.test(str);
        }
        function ValidateEmail(email) 
        {
        if (/^\w+([\.-]?\w+)@\w+([\.-]?\w+)(\.\w{2,3})+$/.test(email))
          {
            return true
          }
            return false
        }
        function checkForm(form)
        {
            console.log("Hello");
            if(form.username.value == "") {
                document.getElementById("textdisplay").innerHTML="Error: Username cannot be blank!";
            return false;
            }
            if(form.email.value == "") {
                document.getElementById("textdisplay").innerHTML="Error: emailadress cannot be blank!";
            return false;
            }
            else if(!ValidateEmail(form.email.value)) {
              document.getElementById("textdisplay").innerHTML="You have entered an invalid email address!";
              return false;
            } else {
              if(form.pwd.value != "") {
                        if(!checkPassword(form.pwd.value)) {
                            document.getElementById("textdisplay").innerHTML="The password should have at least 6 characters, with at least one uppercase letter, one lowercase letter, one number and a symbol.";
                        return false;
                        }
            }
            else {
                document.getElementById("textdisplay").innerHTML="Error: Password cannot be blank!";
                return false;
                 }
            }
            
            return true;
        }
       </script>
    <body>
        
        <div class="container">
        <div class="text-center">
            <div class="col-lg-12">
                REGISTRATION 
            </div>
        </div><br>
        <form class="in" action="{{url_for('form')}}" method="post" onsubmit="return checkForm(this);">
            <label for ="username">Username</label><br>
            <input type="text" id="username" name="username" placeholder="enter your username"><br>

            <label for="email">Email-ID</label><br>
            <input type="text" id="email" name="email" placeholder="enter your email"><br>
            
            <label for="mobilenumber">mobilenumber</label><br>
            <input type="tel" id="phone" name="phone" placeholder="enter your number"><br> 
            
            <label for="pwd">Password</label><br>
            <input type="password" id="pwd" name="pwd" placeholder="enter your password"><br><br>
            
            <button type="submit" class="btn btn-primary mb-2">Sign Up</button>
            <button type="submit" class="btn btn-primary mb-2" formaction="/auth">Login</button><br><br>
            
            <h2 style="text-align: center; color:brown;" id = "textdisplay"></h2>
        </form>
        {% if data %}
        <div class="text-center"><h4>{{data}}</h4></div>
        {% endif %}
        {% if text %}
        <div class="text-center"><h4>{{text}}</h4></div>
        {% endif %}
    </div>
   </body>
</html>